<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Piyay Nutrition - Katalòg / Catalogue</title>
    <meta name="description" content="Catalogue de suppléments de nutrition sportive Piyay - Katalòg sipleman nitrisyon espò Piyay">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .text-balance { text-wrap: balance; }
        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
    </style>
</head>
<body class="bg-gradient-to-b from-slate-50 to-white">
    
    <!-- Header -->
    <header class="border-b bg-white shadow-sm sticky top-0 z-50">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between flex-wrap gap-4">
                <div class="flex items-center gap-4">
                    <img src="./public/logo-piyay.png" alt="Piyay Nutrition" class="w-24 h-16 object-contain">
                    <div>
                        <h1 class="text-xl md:text-2xl font-bold text-slate-900">Piyay Nutrition</h1>
                        <p class="text-xs md:text-sm text-slate-600" id="tagline">Suppléments de qualité supérieure</p>
                    </div>
                </div>
                
                <div class="flex gap-2">
                    <button onclick="setLanguage('fr')" id="btn-fr" class="px-4 py-2 rounded-md font-medium text-sm bg-blue-600 text-white">
                        Français
                    </button>
                    <button onclick="setLanguage('ht')" id="btn-ht" class="px-4 py-2 rounded-md font-medium text-sm border border-slate-300 text-slate-700">
                        Kreyòl
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="bg-gradient-to-r from-blue-600 to-purple-600 text-white py-12">
        <div class="container mx-auto px-4 text-center">
            <h2 class="text-3xl md:text-5xl font-bold mb-4 text-balance" id="catalogTitle">Catalogue</h2>
            <p class="text-lg md:text-xl text-blue-100 max-w-3xl mx-auto text-balance mb-8" id="catalogSubtitle">
                Découvrez notre sélection de suppléments de nutrition sportive de marques premium
            </p>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-2xl mx-auto mt-8">
                <!-- WhatsApp QR -->
                <div class="p-6 bg-white rounded-lg shadow-lg">
                    <p class="text-slate-900 font-semibold mb-3" id="contactText">Contactez-nous sur WhatsApp</p>
                    <img src="./public/qr-piyay-whatsapp.jpeg" alt="QR Code WhatsApp" class="w-48 h-48 mx-auto object-contain">
                </div>

                <!-- Catalogue QR (généré automatiquement) -->
                <div class="p-6 bg-white rounded-lg shadow-lg">
                    <p class="text-slate-900 font-semibold mb-3" id="catalogAccessText">Accéder au catalogue en ligne</p>
                    <canvas id="qr-catalogue" class="mx-auto" style="width: 192px; height: 192px;"></canvas>
                    <p class="text-xs text-slate-600 mt-2" id="scanText">Scannez pour visiter le catalogue</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Products Grid -->
    <section class="py-12">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6" id="productsGrid">
                <!-- Products will be inserted here by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="border-t bg-slate-900 text-white py-8 mt-12">
        <div class="container mx-auto px-4 text-center">
            <img src="./public/logo-piyay.png" alt="Piyay" class="w-24 h-12 mx-auto mb-4 object-contain brightness-0 invert">
            <p class="text-sm text-slate-400" id="copyright">© 2025 Piyay Nutrition. Tous droits réservés.</p>
        </div>
    </footer>

    <script>
        // Load QRCode library dynamically and generate QR code
        function loadQRCodeLibrary() {
            return new Promise((resolve, reject) => {
                console.log('[v0] Chargement de la bibliothèque QRCode...');
                const script = document.createElement('script');
                script.src = 'https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js';
                script.onload = () => {
                    console.log('[v0] Bibliothèque QRCode chargée avec succès!');
                    resolve();
                };
                script.onerror = () => {
                    console.error('[v0] Erreur lors du chargement de la bibliothèque QRCode');
                    reject();
                };
                document.head.appendChild(script);
            });
        }

        // Generate QR Code
        async function generateQRCode() {
            console.log('[v0] Page chargée, génération du QR code...');
            const currentURL = window.location.href;
            console.log('[v0] URL actuelle:', currentURL);
            
            const canvas = document.getElementById('qr-catalogue');
            if (!canvas) {
                console.error('[v0] Canvas qr-catalogue non trouvé!');
                return;
            }
            
            try {
                // Wait for QRCode library to load
                await loadQRCodeLibrary();
                
                if (typeof QRCode === 'undefined') {
                    console.error('[v0] Bibliothèque QRCode non chargée!');
                    return;
                }
                
                QRCode.toCanvas(canvas, currentURL, {
                    width: 192,
                    margin: 2,
                    color: {
                        dark: '#000000',
                        light: '#ffffff'
                    }
                }, function (error) {
                    if (error) {
                        console.error('[v0] Erreur génération QR code:', error);
                    } else {
                        console.log('[v0] QR code généré avec succès!');
                    }
                });
            } catch (error) {
                console.error('[v0] Erreur:', error);
            }
        }

        // Start generation when page loads
        window.addEventListener('load', generateQRCode);

        // Translations
        const translations = {
            fr: {
                tagline: "Suppléments de qualité supérieure",
                catalogTitle: "Catalogue",
                catalogSubtitle: "Découvrez notre sélection de suppléments de nutrition sportive de marques premium",
                flavor: "Saveur",
                benefits: "Bienfaits",
                dosage: "Posologie",
                contact: "Contactez-nous sur WhatsApp",
                catalogAccessText: "Accéder au catalogue en ligne",
                scanText: "Scannez pour visiter le catalogue",
                copyright: "© 2025 Piyay Nutrition. Tous droits réservés."
            },
            ht: {
                tagline: "Sipleman kalite siperyè",
                catalogTitle: "Katalòg",
                catalogSubtitle: "Dekouvri seleksyon sipleman nitrisyon espò nou yo nan mak premyè",
                flavor: "Gou",
                benefits: "Benefis",
                dosage: "Dozaj",
                contact: "Kontakte nou sou WhatsApp",
                catalogAccessText: "Aksede katalòg sou entènèt",
                scanText: "Eskane pou vizite katalòg",
                copyright: "© 2025 Piyay Nutrition. Tout dwa rezève."
            }
        };

        // Products Data
        const products = [
            {
                id: 1,
                name: "R/OAR Ferocious Pre-Workout",
                brand: "Rule One",
                category: "Pre-Workout",
                flavor: "Blue Razz",
                size: "30 portions",
                price: 1200,
                image_url: "./public/images/roar-preworkout.jpeg",
                description_fr: "Pre-workout féroce pour une énergie explosive",
                description_ht: "Pre-workout pou yon enèji eksplozif",
                benefits_fr: "Augmente l'énergie, améliore la concentration, booste la performance",
                benefits_ht: "Ogmante enèji, amelyore konsantrasyon, ranfòse pèfòmans",
                dosage_fr: "1 mesure 20-30 minutes avant l'entraînement",
                dosage_ht: "1 mezi 20-30 minit anvan antrènman"
            },
            {
                id: 2,
                name: "Creatine X3",
                brand: "SixStar",
                category: "Créatine",
                flavor: "Fruit Punch",
                size: "993g (60 portions)",
                price: 1200,
                image_url: "./public/images/creatine-x3-sixstar.jpeg",
                description_fr: "Créatine monohydrate 8g par portion - Construit 4X plus de muscle",
                description_ht: "Kreyatin monohydrat 8g pa pòsyon - Konstwi 4X plis mis",
                benefits_fr: "Augmente la force musculaire, améliore la performance, récupération rapide",
                benefits_ht: "Ogmante fòs misk, amelyore pèfòmans, rekiperasyon rapid",
                dosage_fr: "1 mesure par jour mélangée avec de l'eau",
                dosage_ht: "1 mezi pa jou melanje avèk dlo"
            },
            {
                id: 3,
                name: "100% Whey Protein",
                brand: "Nutrex",
                category: "Protéine",
                flavor: "Vanilla",
                size: "907g (27 portions)",
                price: 1550,
                image_url: "./public/images/whey-protein-nutrex.jpeg",
                description_fr: "Protéine de lactosérum pure pour muscle maigre",
                description_ht: "Pwoteyin laktoserohm pi pou misk mèg",
                benefits_fr: "27g de protéine, favorise la croissance musculaire, récupération optimale",
                benefits_ht: "27g pwoteyin, ankouraje kwasans misk, rekiperasyon optimal",
                dosage_fr: "1-2 mesures après entraînement ou entre les repas",
                dosage_ht: "1-2 mezi apre antrènman oswa ant repa"
            },
            {
                id: 4,
                name: "Creatine Monohydrate",
                brand: "Nutrex",
                category: "Créatine",
                flavor: "Sans saveur",
                size: "300g (60 portions)",
                price: 850,
                image_url: "./public/images/creatine-monohydrate-nutrex.jpeg",
                description_fr: "Créatine monohydrate pure et micronisée",
                description_ht: "Kreyatin monohydrat pi ak mikronize",
                benefits_fr: "Augmente force et performance, soutient croissance musculaire",
                benefits_ht: "Ogmante fòs ak pèfòmans, sipòte kwasans misk",
                dosage_fr: "1 mesure (5g) par jour avec votre boisson préférée",
                dosage_ht: "1 mezi (5g) pa jou avèk bwason ou prefere"
            },
            {
                id: 5,
                name: "Proteína de Soya",
                brand: "Granix",
                category: "Protéine",
                flavor: "Nature",
                size: "340g (12 oz)",
                price: 300,
                image_url: "./public/images/proteina-soya-granix.jpeg",
                description_fr: "Protéine de soya - Gardez la forme!",
                description_ht: "Pwoteyin soya - Rete an fòm!",
                benefits_fr: "Source de protéine végétale, sans cholestérol, facile à digérer",
                benefits_ht: "Sous pwoteyin vegetal, san kolesteròl, fasil pou dij
